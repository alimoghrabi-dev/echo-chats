import{c as e,r as t,j as l,b as a,l as s,n as r,g as n,y as i,o,F as d,p as u,q as m,t as c,I as x,s as f,v as p,B as g,L as h,w as b,x as v,u as j,d as N,e as y,z as w,D as C,A as S,C as _,E as P,G as z,H as F,J as q}from"./index-DfZCuwu6.js";import"./vendor-CCUZaaCS.js";const E=e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),k=({label:e,className:s,labelClassName:r,...n})=>{const[i,o]=t.useState(!1);return l.jsxs("div",{className:"relative w-full max-w-full",children:[l.jsx("textarea",{...n,className:a("peer w-full px-4 py-2.5 transition-all resize-none",s),onFocus:()=>o(!0),onBlur:e=>o(""!==e.target.value),onPaste:e=>e.preventDefault(),id:n.id||e}),l.jsx("label",{htmlFor:n.id||e,className:`absolute left-3 text-neutral-400 ${r} transition-all duration-200 px-1 cursor-text\n          ${i||n.value?"top-0 transform -translate-y-1/2 text-[13px]":"top-3 text-[13px]"}\n          peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:text-[13px]\n          peer-focus:top-0 peer-focus:-translate-y-1/2 peer-focus:text-[13px] peer-focus:text-neutral-500`,children:e})]})},O=({profileId:e,firstName:a,lastName:j,username:N,description:y,setOpen:w})=>{const C=s(),S=r({resolver:b(v),defaultValues:{firstName:"",lastName:"",username:"",description:""}}),{mutate:_,isPending:P}=n({mutationFn:async t=>{await o(e,t)},onSuccess:()=>{C.invalidateQueries({queryKey:["USER"]}),C.invalidateQueries({queryKey:["AUTH_STATUS"]}),w(!1),i.success("Profile updated successfully!"),S.reset()},onError:()=>{i.error("Failed to update profile!"),w(!1)}});return t.useEffect((()=>{S.setValue("firstName",a||""),S.setValue("lastName",j||""),S.setValue("username",N||""),S.setValue("description",y||"")}),[a,j,N,y,S]),l.jsx(d,{...S,children:l.jsxs("form",{onSubmit:S.handleSubmit((e=>_(e))),className:"w-full space-y-3",noValidate:!0,children:[l.jsxs("div",{className:"w-full grid grid-cols-2 gap-2",children:[l.jsx(u,{name:"firstName",control:S.control,render:({field:e})=>l.jsxs(m,{children:[l.jsx(c,{children:l.jsx(x,{type:"text",value:e.value,onChange:t=>e.onChange(f(t.target.value)),label:"First Name",className:"w-full rounded-md text-[15px] bg-neutral-50 text-neutral-800 outline-none border border-neutral-400 hover:border-neutral-500 focus-visible:ring-1 focus-visible:ring-primary/85",labelClassName:"bg-neutral-50 text-neutral-600 text-sm",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"})}),l.jsx(p,{})]})}),l.jsx(u,{name:"lastName",control:S.control,render:({field:e})=>l.jsxs(m,{children:[l.jsx(c,{children:l.jsx(x,{type:"text",value:e.value,onChange:t=>e.onChange(f(t.target.value)),label:"Last Name",className:"w-full rounded-md text-[15px] bg-neutral-50 text-neutral-800 outline-none border border-neutral-400 hover:border-neutral-500 focus-visible:ring-1 focus-visible:ring-primary/85",labelClassName:"bg-neutral-50 text-neutral-600 text-sm",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"})}),l.jsx(p,{})]})})]}),l.jsx(u,{name:"username",control:S.control,render:({field:e})=>l.jsxs(m,{children:[l.jsx(c,{children:l.jsx(x,{type:"text",value:e.value,onChange:t=>e.onChange(f(t.target.value)),label:"Username",className:"w-full rounded-md text-[15px] bg-neutral-50 text-neutral-800 outline-none border border-neutral-400 hover:border-neutral-500 focus-visible:ring-1 focus-visible:ring-primary/85",labelClassName:"bg-neutral-50 text-neutral-600 text-sm",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"})}),l.jsx(p,{})]})}),l.jsx(u,{name:"description",control:S.control,render:({field:e})=>l.jsxs(m,{children:[l.jsx(c,{children:l.jsx(k,{rows:3,value:e.value,onChange:t=>e.onChange(f(t.target.value)),label:"Description",className:"w-full rounded-md text-[15px] bg-neutral-50 text-neutral-800 outline-none border border-neutral-400 hover:border-neutral-500 focus-visible:ring-1 focus-visible:ring-primary/85",labelClassName:"bg-neutral-50 text-neutral-600 text-sm",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"})}),l.jsx(p,{})]})}),l.jsx(g,{type:"submit",disabled:P||!S.formState.isDirty,className:"w-full rounded-md text-[16px] py-6 bg-gradient-to-br from-primary/70 to-primary",children:P?l.jsx(h,{className:"w-4 h-4 animate-spin"}):"Update Profile"})]})})},R=()=>{var e,a,s;const{user:r}=j(),{profileId:o}=N(),[d,u]=t.useState(!1),{data:m,isPending:c,isError:x}=y({queryKey:["USER",o],queryFn:async()=>await q(o),refetchOnWindowFocus:!1}),f=null==(e=null==r?void 0:r.friends)?void 0:e.some((e=>e._id===(null==m?void 0:m._id))),p=null==(a=null==r?void 0:r.friendRequests)?void 0:a.some((e=>e._id===(null==m?void 0:m._id))),b=null==(s=null==m?void 0:m.friendRequests)?void 0:s.some((e=>{var t;return(null==e?void 0:e.toString())===(null==(t=null==r?void 0:r._id)?void 0:t.toString())})),{mutate:v,isPending:k}=n({mutationFn:async e=>{await F(e,null==r?void 0:r._id)},onSuccess:()=>{r&&(null==m?void 0:m.friendRequests).push(r._id),i.success("Friend request sent successfully!")},onError:()=>{i.error("Something went wrong, try again")}});return t.useEffect((()=>{c||(document.title=`Profile | ${null==m?void 0:m.firstName} ${null==m?void 0:m.lastName}`)}),[c,null==m?void 0:m.firstName,null==m?void 0:m.lastName]),c?l.jsx("section",{className:"w-full h-full rounded-3xl flex items-center justify-center bg-gradient-to-br from-neutral-100 to-primary/25",children:l.jsxs(w.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeInOut"},className:"flex flex-col items-center gap-4 p-6 rounded-2xl backdrop-blur-lg bg-white/30 shadow-lg",children:[l.jsxs("div",{className:"relative",children:[l.jsx(h,{className:"w-10 h-10 text-primary animate-spin"}),l.jsx("span",{className:"absolute inset-0 animate-ping bg-primary opacity-50 rounded-full"})]}),l.jsx("p",{className:"text-neutral-700 font-medium text-lg",children:"Loading profile..."})]})}):x||!m?l.jsx("section",{className:"w-full flex flex-col items-center justify-center mt-32",children:l.jsxs(w.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-red-500",children:"âŒ Failed to load profile"}),l.jsx("p",{className:"text-neutral-600 mt-2",children:"Something went wrong. Please try again."}),l.jsx(g,{type:"button",onClick:()=>window.location.reload(),className:"mt-4 bg-primary text-white px-4 py-2 rounded-lg",children:"Retry"})]})}):l.jsx("section",{className:"w-full p-3 md:p-0",children:l.jsxs("div",{className:"w-full relative h-[275px] z-10",children:[l.jsx("img",{src:"/assets/banner-background-B9OLclqY.jpg",alt:"banner",loading:"lazy",className:"w-full h-full object-cover object-left-bottom rounded-t-2xl rounded-b-md brightness-90 opacity-45 shadow"}),l.jsxs("div",{className:"lg:absolute lg:px-8 inset-x-0 -bottom-32 w-full lg:h-48 z-20 flex items-start lg:items-center justify-between gap-x-8 mt-5 lg:mt-0",children:[l.jsxs("div",{className:"flex items-start lg:items-end gap-x-4",children:[l.jsxs("div",{className:"size-32 lg:size-44 rounded-[44px] ring-[6px] ring-neutral-50/50 bg-foreground flex items-center justify-center text-neutral-50 uppercase text-4xl lg:text-5xl font-semibold",children:[null==m?void 0:m.firstName.charAt(0),null==m?void 0:m.lastName.charAt(0)]}),l.jsxs("div",{className:"flex flex-col h-32 lg:h-44 justify-between lg:justify-end py-2",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-x-1.5",children:[l.jsxs("span",{className:"max-w-[275px] text-2xl font-semibold text-neutral-800 capitalize truncate",children:[null==m?void 0:m.firstName," ",null==m?void 0:m.lastName]}),l.jsx("p",{className:"hidden lg:block text-base font-semibold text-neutral-800",children:"-"}),l.jsx("p",{className:"hidden lg:block text-[15px] font-medium text-neutral-700/85",children:null==m?void 0:m.username})]}),m.description&&l.jsx("span",{className:"text-sm font-medium text-neutral-700 mt-1 line-clamp-2 max-w-md break-words",children:m.description})]}),(null==r?void 0:r._id)===(null==m?void 0:m._id)?l.jsxs(C,{open:d,onOpenChange:u,children:[l.jsx(S,{asChild:!0,children:l.jsxs(g,{type:"button",variant:"outline",className:"w-fit mt-2 flex lg:hidden border-neutral-300 bg-neutral-50 hover:bg-white hover:border-neutral-400/80 text-neutral-800 rounded-xl text-[15px] font-medium",children:[l.jsx(E,{}),"Edit Profile"]})}),l.jsxs(_,{"aria-describedby":void 0,className:"rounded max-w-[90%] sm:max-w-lg md:max-w-xl bg-neutral-50 py-4 px-5 outline-none",children:[l.jsxs(P,{children:[l.jsx(z,{className:"text-lg text-neutral-800",children:"Edit Your Profile"}),l.jsx("div",{className:"w-24 h-px bg-primary/35 mx-auto sm:mx-0"})]}),l.jsx(O,{profileId:m._id,firstName:m.firstName,lastName:m.lastName,username:m.username,description:m.description,setOpen:u})]})]}):l.jsx(g,{type:"button",disabled:k||f||p||b,onClick:()=>v(null==r?void 0:r._id),className:"w-fit mt-2 flex lg:hidden rounded-xl text-[15px] font-medium bg-gradient-to-br from-primary/70 to-primary",children:p||b?"Pending...":f?"Already Friends":"Send Request"})]})]}),(null==r?void 0:r._id)===(null==m?void 0:m._id)?l.jsxs(C,{open:d,onOpenChange:u,children:[l.jsx(S,{asChild:!0,children:l.jsxs(g,{type:"button",variant:"outline",className:"border-neutral-300 hidden lg:flex bg-neutral-50 hover:bg-white hover:border-neutral-400/80 text-neutral-800 rounded-xl text-[15px] font-medium",children:[l.jsx(E,{}),"Edit Profile"]})}),l.jsxs(_,{"aria-describedby":void 0,className:"rounded max-w-[90%] sm:max-w-lg md:max-w-xl bg-neutral-50 py-4 px-5 outline-none",children:[l.jsxs(P,{children:[l.jsx(z,{className:"text-lg text-neutral-800",children:"Edit Your Profile"}),l.jsx("div",{className:"w-24 h-px bg-primary/35 mx-auto sm:mx-0"})]}),l.jsx(O,{profileId:m._id,firstName:m.firstName,lastName:m.lastName,username:m.username,description:m.description,setOpen:u})]})]}):l.jsx(g,{type:"button",disabled:k||f||p||b,onClick:()=>v(null==r?void 0:r._id),className:"hidden lg:flex rounded-xl text-[15px] font-medium bg-gradient-to-br from-primary/70 to-primary",children:p||b?"Pending...":f?"Already Friends":"Send Request"})]})]})})};
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{R as default};
